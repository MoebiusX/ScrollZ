# soucre/Makefile.in
# ircii 2.3
# all rights reserved
# written by matthew green.
# copyright (c) 1993
# @(#)$Id: Makefile.in,v 1.13 2008-03-08 15:22:13 f Exp $

LIBS	= @LIBS@
CC	= @CC@
CFLAGS	= @CFLAGS@
LDFLAGS	= @LDFLAGS@
LEX	= @LEX@
LEXLIB	= @LEXLIB@
DEFS	= @DEFS@ @CPPFLAGS@
LN	= @LN@
RM	= @RM@

OBJECTS = alias.o blowfish.o cdcc.o celerity.o crypt.o ctcp.o dcc.o debug.o\
	edit.o edit2.o edit3.o edit4.o edit5.o edit6.o exec.o files.o\
	flood.o funny.o help.o history.o hold.o hook.o if.o ignore.o\
	input.o irc.o ircaux.o ircsig.o keys.o lastlog.o list.o log.o\
	mail.o menu.o names.o newio.o notice.o notify.o numbers.o operv.o\
	output.o parse.o queue.o reg.o scandir.o screen.o server.o stack.o\
	status.o term.o translat.o vars.o whois.o whowas.o window.o\
	dh1080.o fish.o sha-256.o @EXTRA_OBJECTS@

SOURCES = alias.c blowfish.c cdcc.c celerity.c crypt.c ctcp.c dcc.c debug.c\
	edit.c edit2.c edit3.c edit4.c edit5.c edit6.c exec.c files.c\
	flood.c funny.c help.c history.c hold.c hook.c if.c ignore.c\
	input.c irc.c ircaux.c ircsig.c keys.c lastlog.c list.c log.c\
	mail.c menu.c names.c newio.c notice.c notify.c numbers.c operv.c\
	output.c parse.c queue.c reg.c scandir.c screen.c server.c stack.c\
	status.c term.c translat.c vars.c whois.c whowas.c window.c\
	dh1080.c fish.c sha-256.c @EXTRA_SOURCES@

IRCIO_OBJECTS = ircio.o newio.o ircsig.o

IRCIO_SOURCES = ircio.c

WSERV_OBJECTS = wserv.o wterm.o ircsig.o

WSERV_SOURCES = wserv.c wterm.c

IRCFLUSH_SOURCES = ircflush.c
IRCFLUSH_OBJECTS = ircflush.o ircsig.o

INCLUDES = -I../include

default:
	(cd ..;make)

all: scrollz

# got I hate typos.
clena: clean

.c.o:
	$(CC) $(INCLUDES) $(CFLAGS) $(DEFS) $(PP_DEFS) -c $<

scrollz: $(OBJECTS)
	$(CC) $(CFLAGS) $(LDFLAGS) $(DEFS) -o scrollz $(OBJECTS) $(LIBS)
clean::
	$(RM) scrollz $(OBJECTS)

install: scrollz
	cd ..; $(MAKE) install

# .o files needing special compilation flags

edit3.o: Makefile ../Makefile
	$(CC) $(CFLAGS) $(DEFS) $(PP_DEFS) $(INCLUDES) -DIRCPATH=\"$(IRCPATH)\" -c edit3.c

irc.o: Makefile ../Makefile
	$(CC) $(CFLAGS) $(DEFS) $(PP_DEFS) $(INCLUDES) -DIRCLIB=\"$(IRCSHARE)/\" -DIRCPATH=\"$(IRCPATH)\" -c irc.c

vars.o: Makefile ../Makefile
	$(CC) $(CFLAGS) $(DEFS) $(PP_DEFS) $(INCLUDES) -DDEFAULT_HELP_PATH=\"$(HELP_DIR)\" -c vars.c

help.o: Makefile ../Makefile
	$(CC) $(CFLAGS) $(DEFS) $(PP_DEFS) $(INCLUDES) -DDEFAULT_HELP_PATH=\"$(HELP_DIR)\" -c help.c

server.o: Makefile ../Makefile
	$(CC) $(CFLAGS) $(DEFS) $(PP_DEFS) $(INCLUDES) -DIRCIO_PATH=\"$(INSTALL_IRCIO)\" -c server.c

translat.o: Makefile ../Makefile
	$(CC) $(CFLAGS) $(DEFS) $(PP_DEFS) $(INCLUDES) -DTRANSLATION_PATH=\"$(TRANS_DIR)/\" -c translat.c

screen.o: Makefile ../Makefile
	$(CC) $(CFLAGS) $(DEFS) $(PP_DEFS) $(INCLUDES) -DWSERV_PATH=\"$(INSTALL_WSERV)\" -c screen.c

# auxiliary programs

ircflush: $(IRCFLUSH_OBJECTS)
	$(CC) $(INCLUDES) $(CFLAGS) $(LDFLAGS) $(DEFS) -o $@ $(IRCFLUSH_OBJECTS) $(LIBS)

ircio: $(IRCIO_OBJECTS)
	$(CC) $(INCLUDES) $(CFLAGS) $(LDFLAGS) $(DEFS) $(PPS_DEFS) -o $@ $(IRCIO_OBJECTS) $(LIBS)

wserv: $(WSERV_OBJECTS)
	$(CC) $(INCLUDES) $(CFLAGS) $(LDFLAGS) $(DEFS) -o $@ $(WSERV_OBJECTS) $(LIBS)

clean::
	$(RM) ircflush ircflush.o

clean::
	$(RM) ircio ircio.o newio.o

clean::
	$(RM) wserv wserv.o wterm.o wterm.c

# extra junk

clean::
	$(RM) core a.out debug.log depend.mk


# dependencies

# use this to generate something to include below.
makedepend: $(SOURCES) $(IRCIO_SOURCES) $(WSERV_SOURCES)
	$(RM) -f depend.mk
	$(CC) -MM $(CFLAGS) $(DEFS) $(PP_DEFS) $(INCLUDES) $(SOURCES) $(IRCIO_SOURCES) $(WSERV_SOURCES) | sed 's/^ /      /' > depend.mk

wterm.c: term.c
	$(RM) wterm.c
	$(LN) term.c wterm.c

wterm.o:
	$(CC) $(CFLAGS) $(DEFS) $(INCLUDES) -DSTTY_ONLY -c wterm.c

# this is the "depend.mk" file created above.
